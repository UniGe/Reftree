<div class="panel with-nav-tabs panel-default">
	
    <div class="panel-heading">
        <ul
            ng-init=""
            class="nav nav-tabs">
            <li class="active"><a href="#tab1default" data-toggle="tab">Richiedi informazioni</a></li>
			
           <!-- <li
                ng-init="loadContent = {}"
                class="dropdown">
                <a href="#" data-toggle="dropdown">Catasto <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li ng-click="loadContent.two = true"><a href="#tab2default" data-toggle="tab">Urbano</a></li>
                    <li ng-click="loadContent.three = true"><a href="#tab3default" data-toggle="tab">Terreni</a></li>
                </ul>
            </li>
            <li ng-click="loadContent.four = true"><a href="#tab4default" data-toggle="tab">Consistenza</a></li>
            <li ng-click="loadContent.five = true"><a href="#tab5default" data-toggle="tab">Documenti</a></li> -->
        </ul>
    </div>
    <div class="panel-body">
        <div class="tab-content">
            <!--<div style="text-align: right; padding: 10px">
                <div class="btn btn-default" onclick="setSizeToA4($(this).closest('.tab-content').find('.tab-pane.fade.active.in'), 'p')"><i class="fa fa-file-o" aria-hidden="true"></i></div>
                <div class="btn btn-default" onclick="setSizeToA4($(this).closest('.tab-content').find('.tab-pane.fade.active.in'), 'l')"><i class="fa fa-file-o fa-rotate-90" aria-hidden="true"></i></div>
                <div class="btn btn-default" onclick="setInitialWidth($(this).closest('.tab-content').find('.tab-pane.fade.active.in'))"><i class="fa fa-undo" aria-hidden="true"></i></div>
                <div class="btn btn-default" onclick="createPdfFromHtml($(this).closest('.tab-content').find('.tab-pane.fade.active.in'), null, getOrientation($(this).closest('.tab-content').find('.tab-pane.fade.active.in')))"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></div>
            </div>-->
            <div class="tab-pane fade active in" id="tab1default">
				<img src="http://publiccdp.reftree.it/cdp-logo.svg" class="svg" alt="Logo CDP" />
				<div class="row" style="height:30;"></div>
                <div class="row">
					<div class="col-md-6">
					
                        <magic-form-sp storedprocedure="config.USP_GET_FormData"  formname="FORM_SEGNALAZIONI"  hidetabs="true" itemsperrow = 1 model="foc.MY_FORM_DATA"></magic-form-sp>
						<p>*DATI OBBLIGATORI</p>
						<div class="row" style="height:10px;"></div>
						<p>INFORMATIVA EX ART. 13 E CONSENSO EX ART. 23 D.LGS. 30 GIUGNO 2003, N. 196 AL TRATTAMENTO DEI DATI PERSONALI.</p>
						   <div class="row" style="height:10px;"></div>
						  <input type="radio" name="privacy" value='true' id="AUT" required> AUTORIZZO IL TRATTAMENTO DEI DATI<br>
						  <input type="radio" name="privacy" value='false' id ="NOTAUT"> NON AUTORIZZO<br>
						  
						  <!--<input type="checkbox" name="checkboxprova" value='ggggg' id ="checkB" checked=true> NON AUTORIZZO<br> -->
						  <div class="row" style="height:10px;"></div>
						 <!-- <div id="provaa">PROVA</div> -->
						 <div class="g-recaptcha" data-sitekey="6LcPTDMUAAAAAPNVNUbIh43WU-ZF9Qw9I-8RVHOy"></div>
						 <div id="recaptcha"></div>
						 <br>
                        <button class="btn-primary" ng-click="foc.submitForm('MY_FORM_DATA','CORE.PT_SP_TICKET_INS')">INVIA</button>  
						<!--<button class="btn-primary" onclick="alert($('#checkB').is(':checked'))" ng-click="document.getElementById('checkB').checked ===true ? foc.submitForm('MY_FORM_DATA','CORE.PT_SP_TICKET_INS'):null">INVIA</button>  -->

						<!--<magic-form-sp storedprocedure="config.USP_GET_FormData" isreadonly="true" formname="MY_FORM" hidetabs="true" itemsperrow = 1 ></magic-form-sp> -->
                    </div>
					
                </div>
				
            </div>
            <!--<div class="tab-pane fade" id="tab2default">
                <div ng-if="loadContent.two">
                    <div class="row">
                        <div class="col-md-6">
                            <magic-grid gridname="AS_V_ASSET_idecat_sintesi" filterpk="AS_ASSET_ID"></magic-grid>
                        </div>
                        <div class="col-md-6">
                            <magic-chart chartid="1016" />
                        </div>
                    </div>
                    <div class="row">
                        <magic-grid gridname="AS_VI_IDECAT_PER_ASSET_nceu" filterpk="AS_ASSET_ID"></magic-grid>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab3default">
                <div ng-if="loadContent.three">
                    <div class="row">
                        <div class="col-md-6">
                            <magic-grid gridname="AS_VI_IDECAT_PER_ASSET_nct_GROUP" filterpk="AS_ASSET_ID"></magic-grid>
                        </div>
                        <div class="col-md-6">
                            <magic-chart chartid="1019" />
                        </div>
                    </div>
                    <div class="row">
                        <magic-grid gridname="AS_VI_IDECAT_PER_ASSET_nct" filterpk="AS_ASSET_ID"></magic-grid>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab4default">
                <div ng-if="loadContent.four">
                    <div class="row">
                        <div class="col-md-6">
                            <magic-grid gridname="AS_VI_ALL_ASSET_SCH_GRP" filterpk="AS_ASSET_ID"></magic-grid>
                        </div>
                        <div class="col-md-6">
                            <magic-chart chartid="1020" />
                        </div>
                    </div>
                    <div class="row">
                        <magic-grid gridname="AS_VI_ALL_ASSET_SCH" filterpk="AS_ASSET_ID"></magic-grid>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="tab5default">
                <div ng-if="loadContent.five">
                    <div class="row">
                        <div class="col-md-6">
                            <magic-grid gridname="DO_VI_ALL_DOCUME_SCH_GRP" filterpk="AS_ASSET_ID"></magic-grid>
                        </div>
                        <div class="col-md-6">
                            <magic-chart chartid="1021" />
                        </div>
                    </div>
                    <div class="row">
                        <magic-grid gridname="DO_VI_ALL_DOCUME_SCH" filterpk="AS_ASSET_ID"></magic-grid>
                    </div>
                </div>
            </div>  -->
        </div>
    </div>
</div>
<style media="screen" type="text/css">
.carousel {
  overflow: hidden;
  position: relative;
  width: 100%;
  height: 400px;
  perspective: 500px;
  transform-style: preserve-3d;
  transform-origin: 0% 50%;
}
.carousel.carousel-slider {
  top: 0;
  left: 0;
  height: 0;
}
.carousel.carousel-slider .carousel-fixed-item {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 20px;
  z-index: 1;
}
.carousel.carousel-slider .carousel-fixed-item.with-indicators {
  bottom: 68px;
}
.carousel.carousel-slider .carousel-item {
  width: 100%;
  height: 100%;
  min-height: 400px;
  position: absolute;
  top: 0;
  left: 0;
}
.carousel.carousel-slider .carousel-item h2 {
  font-size: 24px;
  font-weight: 500;
  line-height: 32px;
}
.carousel.carousel-slider .carousel-item p {
  font-size: 15px;
}
.carousel .carousel-item {
  display: none;
  width: 200px;
  height: 400px;
  position: absolute;
  top: 0;
  left: 0;
}
.carousel .carousel-item img {
  width: 100%;
}
.carousel .indicators {
  position: absolute;
  text-align: center;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
}
.carousel .indicators .indicator-item {
  display: inline-block;
  position: relative;
  cursor: pointer;
  height: 8px;
  width: 8px;
  margin: 24px 4px;
  background-color: rgba(255, 255, 255, 0.5);
  transition: background-color .3s;
  border-radius: 50%;
}
.carousel .indicators .indicator-item.active {
  background-color: #fff;
}
.materialboxed {
  display: block;
  cursor: zoom-in;
  position: relative;
  transition: opacity .4s;
}
.materialboxed:hover {
  will-change: left, top, width, height;
}
.materialboxed:hover:not(.active) {
  opacity: .8;
}

.materialboxed.active {
  cursor: zoom-out;
}

#materialbox-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #292929;
  z-index: 1000;
  will-change: opacity;
}

.materialbox-caption {
  position: fixed;
  display: none;
  color: #fff;
  line-height: 50px;
  bottom: 0;
  width: 100%;
  text-align: center;
  padding: 0% 15%;
  height: 50px;
  z-index: 1000;
  -webkit-font-smoothing: antialiased;
}


span.form-control-feedback.ng-scope.glyphicon.glyphicon-ok {
    display: none;
}

input#PRIVACY {
    visibility: hidden;
} 
input#CAPTCHA {
    visibility: hidden;
} 
input#COGNOME {
    font-size: 14px;
}
input#NOME {
    font-size: 14px;
}
input#EMAIL {
    font-size: 14px;
}
input#TELEFONO {
    font-size: 14px;
}
input#RAGSOC {
    font-size: 14px;
}
input#CITTA {
    font-size: 14px;
}
input#PIVA {
    font-size: 14px;
}
input#TELEFONO2 {
    font-size: 14px;
}

.bend select{
    padding: 0px 27px 0px 8px !important;
}
textarea.form-control {
   height: auto;
    min-height: 100!important;
}

</style>

<script src="https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl=it" async defer></script>

<script type="text/javascript">

	
      var recaptchaCallback = function () {
        console.log('recaptcha is ready'); // showing
        grecaptcha.render("recaptcha", {
            sitekey: '6LcPTDMUAAAAAPNVNUbIh43WU-ZF9Qw9I-8RVHOy',
            callback: function (pippo) {
                document.getElementById('CAPTCHA').value =pippo;
				$("#CAPTCHA").change();
				console.log(CAPTCHA.value);
				console.log(pippo)
            }
        });
      }
    </script>

<script>


/*function CheckPolicy(){
	 var AUT =document.getElementById("AUT");
	 
	 document.getElementById('PRIVACY').innerHTML ="true";
		console.log("ciao");
		}
		window.onload =CheckPolicy();*/
		
		
	  window.setTimeout(function () {
	  //$( "FORM_SEGNALAZIONI").on("submit",function(){alert(ok)});
	  
	  var aaa =document.getElementsByClassName("control-label");
	  for(var i =0;i<aaa.length;i++){if (aaa[i].innerHTML =="PRIVACY") {aaa[i].style.visibility = "hidden"; } if (aaa[i].innerHTML=="CAPTCHA") {aaa[i].style.visibility="hidden";}}
		console.log(document.getElementById("AUT"));
		console.log(document.getElementById('PRIVACY'));
		
		document.getElementById('CAPTCHA').value ="falso";
		$("#CAPTCHA").change();
		document.getElementById('PRIVACY').value ="falso";
		$("#PRIVACY").change();
		
            //console.log("setInterval on");
		   document.getElementById("AUT").onclick =function(){
   
			console.log("siamo entrati");
			document.getElementById('PRIVACY').value ="vero";
			$("#PRIVACY").change();
   }
   
   	   document.getElementById("NOTAUT").onclick =function(){
	   console.log("siamo entratiNOAUT");
   	document.getElementById('PRIVACY').value ="falso";
	$("#PRIVACY").change();
   }
			var scheda = document.getElementById("Scheda immobile");
			
		document.getElementById("Scheda immobile").readOnly = true;
		//document.getElementById("NOME").required = true;

        }, 800);

    $("#wndmodalContainer").addClass("modal-wide");
    var data = $("#appcontainer").data("customItemInfo");
    $("#thebeautifulmap").append('<div><iframe width="520" height="150" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCcOKGhVcgm8EIErOotXKvPaI41oHEb2HM&q=' + data.AS_ASSET_INDIRIZZO + '" ></iframe></div><div><iframe width="520" height="150" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/streetview?key=AIzaSyCcOKGhVcgm8EIErOotXKvPaI41oHEb2HM&location=' + data.latitude + ',' + data.longitude + '&heading=210&pitch=10&fov=35" ></iframe></div>');
    //carosello immagini...
    var $content = $("#mf_carousel");
    //must be on first tab...

    $.ajax({    //#mfapireplaced
        type: "POST",
        url: "/api/AS_V_ASSET_assetgroups/GetAsAssetImages",
        data: JSON.stringify({ AS_ASSET_ID: "" + data.AS_ASSET_ID }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        error: function (err) { console.log("ERROR", err) },        
    }).then(function (res1) {
        var imgs = res1.Data[0].Table; 
        if (imgs.length) {
            var docids = [];
            $.each(imgs, function (index, value) {
                if (docids.indexOf(value.DO_DOCUME_ID) == -1)
                    docids.push(value.DO_DOCUME_ID)
            });
            $.get("/api/Documentale/GetDocumentPaths?documentIDs=" + docids.join())
                .then(function (res) {
                    if (res) {
                        res = JSON.parse(res);
                        if (res.length) {
                            var imgs = [];
                            $.each(imgs, function (j, v) {
                                if (j < 10) {
                                    $.each(res, function (k, val) {
                                        if (val.DO_DOCUME_ID == v.DO_DOCUME_ID)
                                            path = val.path;
                                    });
                                    imgs.push({
                                        // src: "/api/MAGIC_SAVEFILE/GetFile?path=" + path + "\\" + JSON.parse(v.DO_DOCVER_LINK_FILE)[0].name, height: "350px"
                                        srcDet: "/api/MAGIC_SAVEFILE/GetFile?path=" + path + "\\" + JSON.parse(v.DO_DOCVER_LINK_FILE)[0].name, height: "350px",
                                        src: "/api/MAGIC_SAVEFILE/GetFile?path=" + "C:\\Projects\\Reftree\\MagicSolution" + '\\' + v.DO_DOCVER_THUMBNAIL_LINK, height: "350px"

                                    });
                                }
                            });
                            MaterializeAddCarouselTo$el($content, "asset-gallery", imgs);
                        }
                        else

                            $content.html();

                    }


                });
        }
        else
            // remove crousel ...
            $("#mf_carousel").remove();
    });


    function MaterializeAddCarouselTo$el($el, carouselID, arrayOfImgObjects) {
        $el.html(largeSpinnerHTML);
        return $.get("/Views/3/Templates/Materialize-carousel.html")
            .then(function (HTML) {
                HTML = HTML.format(carouselID);
                var itemsHTML = "",
                    indicatorsHTML = "",
                    style = "";
                $.each(arrayOfImgObjects, function (k, v) {
                    style = "";
                    if (v.width != undefined) {
                        style += 'width:' + v.width + ' !important;';
                    }
                    if (v.height != undefined) {
                        style += 'height:' + v.height + ' !important';
                    }
                    itemsHTML += '<a class="carousel-item" href="' + v.srcDet + '" target="_blank"><img src="' + v.srcDet + '"></a>'
                  // itemsHTML += '<a class="carousel-item" href="' + v.src + '" target="_blank"><img src="' + v.src + '"></a>'
                  
                });

                var $html = $(HTML);

                $el.html($html);
                $("#at123").append(itemsHTML);


                //inizializzo il componente caricando prima il js

                $.getScript('Js/carousel.js', function () {
                    $(document).ready(function () {
                        $('.carousel').carousel({ padding: 80, shift: 10 });
                    });
                })



            });
    }
	
	

</script>
